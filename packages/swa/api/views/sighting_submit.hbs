<div id="sighting-submit"
     {{#if retrySubmission}}
     hx-swap-oob="true"
     {{/if}}
     class="collapse bg-base-200">
  <input type="checkbox" checked="true"/>
  <div class="collapse-title text-xl font-medium">
    Submit a new sighting!
  </div>
  <div class="collapse-content">
    <form id='form'
          hx-encoding="multipart/form-data"
          hx-post="/api/fileupload"
          hx-target="body"
          hx-swap="beforeend">
      <input name='file' type='file' accept='image/jpeg,image/png'>
      <button class="btn btn-primary">
        Upload
      </button>
      <progress id='progress' value='0' max='100'></progress>
    </form>
    <script>
      htmx.on('#form', 'htmx:xhr:progress', function (evt) {
        htmx.find('#progress').setAttribute('value', evt.detail.loaded / evt.detail.total * 100);
        if (evt.detail.loaded == evt.detail.total) {
          htmx.off('#form', 'htmx:xhr:progress', this);
        }
      });
    </script>
  </div>
</div>