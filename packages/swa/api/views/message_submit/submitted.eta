<dialog id="submission-status" class="modal" hx-on::load="htmx.find('#submission-status').showModal()">
  <div class="modal-box" hx-target="this" hx-swap="outerHTML">
    <h3 class="font-bold text-lg">Thanks for the feedback!</h3>
    <% if (it.message.notificationStatusReason === "validLocation" ) { %>
      <div>Looks like you're near the vv.cr car, so we'll send a notification straight to the driver's phone!</div>
    <% } %>
    <% if (it.message.messageData.locationEnable === "locationShared" && !it.message.messageLocation) { %>
      <div class="divider"></div>
      <div>You wanted to submit a location with this message, but we didn't get one!  Maybe you have location permissions denied for this site?</div>
    <% } %>
    <div class="modal-action">
      <button class="btn btn-primary"
              hx-get="/api/messages/new?finished=true"
              hx-swap="outerHTML"
              hx-target="#submission-status">
        OK!
      </button>
    </div>
  </div>
</dialog>